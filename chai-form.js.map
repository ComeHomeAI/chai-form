{"version":3,"file":"chai-form.js","sourceRoot":"","sources":["src/chai-form.ts"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * @license\r\n * Copyright 2024 Come Home AI, Inc.\r\n * SPDX-License-Identifier: BSD-3-Clause\r\n */\r\n\r\nimport { LitElement, html, css } from 'lit';\r\nimport { customElement, property, state } from 'lit/decorators.js';\r\n\r\n/**\r\n * The quoting form element that initiates the flow for the user.\r\n *\r\n * @fires count-changed - Indicates when the count changes\r\n * @slot - This element has a slot\r\n * @csspart button - The button\r\n */\r\n@customElement('chai-form')\r\nexport class ChaiForm extends LitElement {\r\n  @state() visitorId: string;\r\n  @state() name: string;\r\n  @state() phone: string;\r\n  @state() email: string;\r\n  @state() date: string;\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.visitorId = localStorage.getItem('chai-visitorId') || crypto.randomUUID();\r\n    localStorage.setItem('chai-visitorId', this.visitorId);\r\n\r\n    this.name = localStorage.getItem('chai-name') || '';\r\n    this.phone = localStorage.getItem('chai-phone') || '';\r\n    this.email = localStorage.getItem('chai-email') || '';\r\n    this.date = localStorage.getItem('chai-date') || '';\r\n  }\r\n\r\n  static override styles = css`\r\n    :host {\r\n      /**\r\n       */\r\n      --chai-color-primary: red;\r\n      --chai-color-secondary: blue;\r\n      /**\r\n       * This font family is applied to all of the form elements.\r\n       * TODO: Automatically set this to inherit from the parent element!\r\n       */\r\n      --chai-form-font-family: inherit;\r\n      /**\r\n       * This font size is applied to all of the form elements.\r\n       */\r\n      --chai-form-font-size: 16px;\r\n      /**\r\n       * This border is applied to the form element only.\r\n       * Inputs and the button have their own border styles.\r\n       */\r\n      --chai-form-border: 1px solid gray;\r\n      /**\r\n       * This corner radius is applied to the form border, input field borders, and the button.\r\n       */\r\n      --chai-form-corner-radius: 8px;\r\n      /**\r\n       * This padding is applied to form edges as well as the vertical gap between separate form elements.\r\n       * The gap between labels and their paired inputs is one-fourth of this value.\r\n       */\r\n      --chai-form-padding: 16px;\r\n\r\n      /****/\r\n      /* --chai-button-color: #fff;\r\n      --chai-button-background-color-primary: #2abd27;\r\n      --chai-button-background-color-secondary: #11a40e;\r\n      --chai-button-hover-background-color-primary: var(--chai-button-background-color-secondary);\r\n      --chai-button-hover-background-color-secondary: var(--chai-button-background-color-primary);\r\n      --chai-button-font-family: 'Oswald', sans-serif;\r\n      --chai-button-font-size: 17px;\r\n      --chai-button-border-radius: 10px;\r\n      --chai-button-text-transform: uppercase;\r\n      --chai-button-font-weight: 400;\r\n      --chai-button-line-height: 1.5em;\r\n      --chai-offer-font-family: var(--chai-button-font-family);\r\n      --chai-offer-font-size: 16px;\r\n      --chai-offer-color: #4A2684; */\r\n      /* For now, we don't need to style the host element, just the form. */\r\n      /* display: block;\r\n      max-width: 400px;\r\n      font-family: sans-serif;\r\n      border: solid 1px gray;\r\n      padding: var(--chai-form-padding); */\r\n    }\r\n    form {\r\n      display: flex;\r\n      flex-direction: column;\r\n      max-width: 400px;\r\n      gap: calc(var(--chai-form-padding) / 2);\r\n      font-family: var(--chai-form-font-family);\r\n      font-size: var(--chai-form-font-size);\r\n      border: var(--chai-form-border);\r\n      border-radius: var(--chai-form-corner-radius);\r\n      padding: var(--chai-form-padding);\r\n    }\r\n    label {\r\n      margin-bottom: calc(-1 * var(--chai-form-padding) / 4);\r\n    }\r\n    input {\r\n      /* font-family: var(--chai-form-font-family); */\r\n      font-size: var(--chai-form-font-size);\r\n      border-radius: var(--chai-form-corner-radius);\r\n      padding: calc(var(--chai-form-padding) / 2);\r\n      margin-bottom: calc(var(--chai-form-padding) / 2);\r\n    }\r\n    a {\r\n      cursor: pointer;\r\n      background-color: blue;\r\n      color: white;\r\n      text-align: center;\r\n      text-decoration: none;\r\n      border-radius: var(--chai-form-corner-radius);\r\n      margin-top: calc(var(--chai-form-padding) / 2);\r\n      padding: calc(var(--chai-form-padding) / 1.5);\r\n    }\r\n  `;\r\n\r\n  /**\r\n   * The ComeHome.ai flow type is the ID that has been configured for the location/context of\r\n   * this form (e.g., the mover's website).\r\n   */\r\n  @property()\r\n  flowType = 'comehome.ai';\r\n\r\n  /**\r\n   * The text to display on the button; defaults to \"Get Quote\".\r\n   */\r\n  @property()\r\n  buttonText = \"Get Quote\";\r\n\r\n  override render() {\r\n    return html`\r\n      <form id=\"chai-quote-form\">\r\n        <label for=\"name\">Name</label>\r\n        <input id=\"name\" type=\"text\" placeholder=\"First & Last Name\" autocomplete=\"name\"\r\n          .value=\"${this.name}\" @input=\"${this.updateField('name')}\">\r\n        <label for=\"phoneNumber\">Phone Number</label>\r\n        <input id=\"phoneNumber\" type=\"tel\" placeholder=\"Phone Number\" autocomplete=\"tel\"\r\n          .value=\"${this.phone}\" @input=\"${this.updateField('phone')}\">\r\n        <label for=\"email\">Email Address</label>\r\n        <input id=\"email\" type=\"email\" placeholder=\"Email Address\" autocomplete=\"email\"\r\n          .value=\"${this.email}\" @input=\"${this.updateField('email')}\">\r\n        <label for=\"date\">Estimated Move Date</label>\r\n        <input id=\"date\" type=\"date\" placeholder=\"Estimated Move Date\" autocomplete=\"off\"\r\n          .value=\"${this.date}\" @input=\"${this.updateField('date')}\">\r\n        <a href=\"https://www.comehome.ai\" @click=\"${this.openFlowInstance}\">${this.buttonText}</a>\r\n      </form>\r\n    `;\r\n  }\r\n\r\n  updateField(fieldName: 'name' | 'phone' | 'email' | 'date') {\r\n    return (e: Event) => {\r\n      const newValue = (e.target as HTMLInputElement).value;\r\n\r\n      this[fieldName] = newValue;\r\n\r\n      localStorage.setItem(`chai-${fieldName}`, newValue);\r\n\r\n      fetch(`https://example.local:3000/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'X-CHAI-VisitorID': this.visitorId,\r\n        },\r\n        body: JSON.stringify({ fieldName: newValue }),\r\n      });\r\n\r\n      //TODO: Google Tag Manager integration!\r\n\r\n      //TODO: Decide what to do about errors (e.g., open the\r\n      //      flow URL immediately to try to capture those leads?)\r\n    };\r\n  }\r\n\r\n  openFlowInstance(e: Event) {\r\n    e.preventDefault();\r\n\r\n    //TODO: Google Tag Manager integration!\r\n\r\n    window.open(`https://example.com/flows/${this.flowType}`, '_blank');\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    'chai-form': ChaiForm;\r\n  }\r\n}\r\n"]}